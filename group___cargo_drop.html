<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=9" />
    <meta name="generator" content="Doxygen 1.9.6" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>FLHook: Cargo Drop</title>
    <link href="tabs.css" rel="stylesheet" type="text/css" />
    <link rel="shortcut icon" href="FLServer.ico" type="image/x-icon" />
    <script type="text/javascript" src="jquery.js"></script>
    <script type="text/javascript" src="dynsections.js"></script>
    <script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
    <script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
    <script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
    <script type="text/javascript">
        DoxygenAwesomeFragmentCopyButton.init()
        DoxygenAwesomeDarkModeToggle.init()
        DoxygenAwesomeParagraphLink.init()
    </script>
    <link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
    <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
    <link href="doxygen.css" rel="stylesheet" type="text/css" />
    <link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
</head>
<body>
    <!-- https://tholman.com/github-corners/ -->
    <a href="https://github.com/fl-devs/FLHook" class="github-corner" title="View source on GitHub" target="_blank">
        <svg viewBox="0 0 250 250" width="40" height="40"
            style="position: absolute; top: 0; border: 0; right: 0; z-index: 99;" aria-hidden="true">
            <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
            <path
                d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
                fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
            <path
                d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
                fill="currentColor" class="octo-body"></path>
        </svg></a>
    <style>
        .github-corner:hover .octo-arm {
            animation: octocat-wave 560ms ease-in-out
        }
        @keyframes octocat-wave {
            0%,
            100% {
                transform: rotate(0)
            }
            20%,
            60% {
                transform: rotate(-25deg)
            }
            40%,
            80% {
                transform: rotate(10deg)
            }
        }
        @media (max-width:500px) {
            .github-corner:hover .octo-arm {
                animation: none
            }
            .github-corner .octo-arm {
                animation: octocat-wave 560ms ease-in-out
            }
        }
    </style>
    <div id="top">
        <!-- do not remove this div, it is closed by doxygen! -->
        <div id="titlearea">
            <table cellspacing="0" cellpadding="0">
                <tbody>
                    <tr style="height: 56px;">
                        <td id="projectlogo"><img alt="Logo" src="FLServer.png" /></td>
                        <td id="projectalign" style="padding-left: 0.5em;">
                            <div id="projectname">FLHook
                            </div>
                            <div id="projectbrief">Server extension for Freelancer (2003)</div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <!-- end header part --><!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('group___cargo_drop.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">Cargo Drop</div></div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>The "Cargo Drop" plugin handles consequences for a player who disconnects whilst in space and allows servers to ensure that cargo items are dropped on player death rather than lost. Is also allows server owners to set additional commodities that are spawned as loot when a player ship dies based on hull mass (i.e. salvage). </p>
<dl class="section date"><dt>Date</dt><dd>Feb 2010 </dd></dl>
<dl class="section author"><dt>Author</dt><dd>Cannon (Ported by Raikkonen 2022)</dd></dl>
<h4><a class="anchor" id="cmds"></a>
Player Commands</h4>
<p>There are no player commands in this plugin.</p>
<h4><a class="anchor" id="adminCmds"></a>
Admin Commands</h4>
<p>There are no admin commands in this plugin.</p>
<h4><a class="anchor" id="configuration"></a>
Configuration</h4>
<div class="fragment"><div class="line">{</div>
<div class="line">  <span class="stringliteral">&quot;cargoDropContainer&quot;</span>: <span class="stringliteral">&quot;lootcrate_ast_loot_metal&quot;</span>,</div>
<div class="line">  <span class="stringliteral">&quot;disconnectMsg&quot;</span>: <span class="stringliteral">&quot;%player is attempting to engage cloaking device&quot;</span>,</div>
<div class="line">  <span class="stringliteral">&quot;disconnectingPlayersRange&quot;</span>: 5000.0,</div>
<div class="line">  <span class="stringliteral">&quot;playerOnDeathCargo&quot;</span>: [<span class="stringliteral">&quot;commodity_super_alloys&quot;</span>, <span class="stringliteral">&quot;commodity_engine_components&quot;</span>]</div>
<div class="line">  <span class="stringliteral">&quot;hullDropFactor&quot;</span>: 0.1,</div>
<div class="line">  <span class="stringliteral">&quot;killDisconnectingPlayers&quot;</span>: <span class="keyword">true</span>,</div>
<div class="line">  <span class="stringliteral">&quot;lootDisconnectingPlayers&quot;</span>: <span class="keyword">true</span>,</div>
<div class="line">  <span class="stringliteral">&quot;noLootItems&quot;</span>: [],</div>
<div class="line">  <span class="stringliteral">&quot;reportDisconnectingPlayers&quot;</span>: <span class="keyword">true</span></div>
<div class="line">}</div>
</div><!-- fragment --><h4><a class="anchor" id="ipc"></a>
IPC Interfaces Exposed</h4>
<p>This plugin does not expose any functionality.</p>
<h4><a class="anchor" id="optional"></a>
Optional Plugin Dependencies</h4>
<p>None. </p>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga6e72111dcf56ea54b44083fba71c3942" name="ga6e72111dcf56ea54b44083fba71c3942"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6e72111dcf56ea54b44083fba71c3942">&#9670;&#160;</a></span>ClearClientInfo()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Plugins::CargoDrop::ClearClientInfo </td>
          <td>(</td>
          <td class="paramtype">ClientId &amp;&#160;</td>
          <td class="paramname"><em>client</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Clear our variables so that we can recycle clients without confusion. </p>

</div>
</div>
<a id="gaa98820463d3ace5df2edb318a64450fd" name="gaa98820463d3ace5df2edb318a64450fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa98820463d3ace5df2edb318a64450fd">&#9670;&#160;</a></span>DisconnectCheck()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Plugins::CargoDrop::DisconnectCheck </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Timer that checks if a player has disconnected and punished them if so. </p>

</div>
</div>
<a id="ga95fb870c3789a8d21df0bdc634c57a1c" name="ga95fb870c3789a8d21df0bdc634c57a1c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga95fb870c3789a8d21df0bdc634c57a1c">&#9670;&#160;</a></span>SendDeathMsg()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Plugins::CargoDrop::SendDeathMsg </td>
          <td>(</td>
          <td class="paramtype">const std::wstring &amp;&#160;</td>
          <td class="paramname"><em>message</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const SystemId &amp;&#160;</td>
          <td class="paramname"><em>system</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ClientId &amp;&#160;</td>
          <td class="paramname"><em>clientVictim</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ClientId &amp;&#160;</td>
          <td class="paramname"><em>clientKiller</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Hook for ship destruction. It's easier to hook this than the PlayerDeath one. Drop a percentage of cargo + some loot representing ship bits. </p>

</div>
</div>
<a id="gac3f548496c3e4bca7d2e288b12f4a672" name="gac3f548496c3e4bca7d2e288b12f4a672"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac3f548496c3e4bca7d2e288b12f4a672">&#9670;&#160;</a></span>SPObjUpdate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Plugins::CargoDrop::SPObjUpdate </td>
          <td>(</td>
          <td class="paramtype">struct SSPObjUpdateInfo const &amp;&#160;</td>
          <td class="paramname"><em>ui</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ClientId &amp;&#160;</td>
          <td class="paramname"><em>client</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Hook on SPObjUpdate, used to get the timestamp from the player. Used to figure out if the player has disconnected in the timer. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6 </li>
  </ul>
</div>
</body>
</html>
